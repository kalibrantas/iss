<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>index</title>
		<link rel="stylesheet" href="../../public/bootstrap/css/bootstrap.min.css" media="screen"/>

		<script src="../../public/jquery/jquery-2.1.3.min.js"></script>
		<script src="../../public/bootstrap/js/bootstrap.min.js"></script>
		<script src="../../public/angular/angular.min.js"></script>

		<style>
			.header-top {
				background-color: #00796B;
				margin: 0px;
				height: 20px;
				z-index: 9999;
			}
			.header-btm {
				background-color: #009688;
			}
			body {
				background-color: #FFFFFF;
			}
			#body {
				margin: auto;
				margin-top: 75px;
			}
			.border-dotted {
				border: 3px #727272;
				border-style: dashed;
			}
			.centered {
				margin: auto;
				clear: both;
			}
		</style>
		<style>
			.tree, .tree ul {
				margin: 0;
				padding: 0;
				list-style: none
			}
			.tree ul {
				margin-left: 1em;
				position: relative
			}
			.tree ul ul {
				margin-left: .5em
			}
			.tree ul:before {
				content: "";
				display: block;
				width: 0;
				position: absolute;
				top: 0;
				bottom: 0;
				left: 0;
				border-left: 1px solid
			}
			.tree li {
				margin: 0;
				padding: 0 1em;
				line-height: 2em;
				color: #369;
				font-weight: 700;
				position: relative
			}
			.tree ul li:before {
				content: "";
				display: block;
				width: 10px;
				height: 0;
				border-top: 1px solid;
				margin-top: -1px;
				position: absolute;
				top: 1em;
				left: 0
			}
			.tree ul li:last-child:before {
				background: #fff;
				height: auto;
				top: 1em;
				bottom: 0
			}
			.indicator {
				margin-right: 5px;
			}
			.tree li a {
				text-decoration: none;
				color: #369;
			}
			.tree li button, .tree li button:active, .tree li button:focus {
				text-decoration: none;
				color: #369;
				border: none;
				background: transparent;
				margin: 0px 0px 0px 0px;
				padding: 0px 0px 0px 0px;
				outline: 0;
			}
		</style>
		<script>
			$.fn.extend({
				treed : function(o) {

					var openedClass = 'glyphicon-minus-sign';
					var closedClass = 'glyphicon-plus-sign';

					if ( typeof o != 'undefined') {
						if ( typeof o.openedClass != 'undefined') {
							openedClass = o.openedClass;
						}
						if ( typeof o.closedClass != 'undefined') {
							closedClass = o.closedClass;
						}
					};

					//initialize each of the top levels
					var tree = $(this);
					tree.addClass("tree");
					tree.find('li').has("ul").each(function() {
						var branch = $(this);
						//li with children ul
						branch.prepend("<i class='indicator glyphicon " + closedClass + "'></i>");
						branch.addClass('branch');
						branch.on('click', function(e) {
							if (this == e.target) {
								var icon = $(this).children('i:first');
								icon.toggleClass(openedClass + " " + closedClass);
								$(this).children().children().toggle();
							}
						})
						branch.children().children().toggle();
					});
					//fire event from the dynamically added icon
					tree.find('.branch .indicator').each(function() {
						$(this).on('click', function() {
							$(this).closest('li').click();
						});
					});
					//fire event to open branch if the li contains an anchor instead of text
					tree.find('.branch>a').each(function() {
						$(this).on('click', function(e) {
							$(this).closest('li').click();
							e.preventDefault();
						});
					});
					//fire event to open branch if the li contains a button instead of text
					tree.find('.branch>button').each(function() {
						$(this).on('click', function(e) {
							$(this).closest('li').click();
							e.preventDefault();
						});
					});
				}
			});

			$(function() {

				hide = true;
				ne = true;
				ce = '';
				href = '';

				$('body').popover({
					html : true,
					selector : '[data-toggle="popover"]',
					content : function() {
						href = $(this).attr('href');
						ce = $(href).removeClass('hide');
						return ce;
					}
				}).on("shown.bs.popover", function() {
					ne = false;
					$(document).click(function(event) {
						if (hide && !ne) {
							$('[data-toggle="popover"]').popover('hide');
						}
					});
					$(".popover").mouseover(function() {
						hide = false;
					});
					$(".popover").mouseleave(function() {
						hide = true;
					});
				}).on("hidden.bs.popover", function() {
					ne = true;
					setTimeout(function() {
						$('[href="' + href + '"]:first').after(ce.addClass('hide'));
					}, 100);
				});

			});
			$(function() {
				// $("#question_container").sortable({
				// revert : true
				// });
				// $("#draggable").draggable({
				// connectToSortable : "#sortable",
				// helper : "clone",
				// revert : "invalid"
				// });
				// $("ul, li").disableSelection();

				$("#add_new_question_bt").click(function() {
					$('#myModal').modal({
						backdrop : 'static'
					});
				});
				$("#tree").treed();
			});
		</script>
		<script src="../../public/js/coba.js"></script>

	</head>

	<body ng-app="myApp">

		<div id="header" class="header-btm navbar navbar-fixed-top">
			<div class="header-top"></div>
			<div class="container"></div>
		</div>
		<div id="body" class="container">
			<div class="row">
				<div class="col-md-3" ng-controller="QuestionListController as qs">
					<div class="container-fluid">
						<div class="well well-sm">
							<ul id="tree">
								<li ng-repeat="question in question_list">
									{{question.name}} ({{question.type}})
								</li>
							</ul>

						</div>

					</div>
				</div>
				<div class="col-md-9" style="background-color: #EEEEEE">
					<!--start question-->
					<div ng-controller="QuestionController as question" >
						<ul id="question_container">
							<li question-item ng-repeat="question_item in question_list" data="question_item"></li>

						</ul>

					</div>
					<!--end question-->
					<div class="">
						<div class="well well-sm border-dotted row container-fluid">
							<div class="centered" style="width: 50px; padding: 0px;">
								<a href="#" role="button" id="add_new_question_bt"><span style="font-size: 3em;" class=" glyphicon-plus" aria-hidden="true"></span></a>
							</div>
						</div>
					</div>

					<div ng-controller="NewQuestionController as addNewQ" class="modal fade "  id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog ">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
									<h4 class="modal-title" id="myModalLabel">Add Question</h4>
								</div>
								<div class="modal-body">
									<form class="form-horizontal">
										<div class="form-group">
											<label class="col-sm-2">Name</label>
											<div class="col-sm-10">
												<input type="text" class="form-control " placeholder="question name" ng-model="qName"/>
											</div>

										</div>
										<div class="form-group">
											<label class="col-sm-2">Label</label>
											<div class="col-sm-10">
												<textarea class="form-control" placeholder="question label" ng-model="qLabel"></textarea>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-2">Accept Null</label>
											<div class="col-sm-10">
												<div class="radio">
													<label>
														<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked="">
														Yes</label>
												</div>
												<div class="radio">
													<label>
														<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
														No</label>
												</div>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-2">Type</label>
											<div class="col-sm-10">
												<select ng-change="addQuestionOption()" name="question_type" ng-model="qType" ng-options="type.label for type in question_types"></select>
											</div>
										</div>
										<div id="question_option">

										</div>
									</form>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">
										Cancel
									</button>
									<button type="button" class="btn btn-primary" ng-click="addQuestion(qName,qLabel,qType)">
										Add
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<template id="option_integer">
			<div>
				<div class="row">
					<div class="col-md-6">
						<label class="">min</label>
						<input type="number" size="5" />
					</div>
					<div class="col-md-6 form-group">
						<label>max</label>
						<input type="number" size="5" />
					</div>
				</div>
			</div>
		</template>

		<template id="option_select_one">
			<div id="q_option_select" ng-controller="OptionSelectOneController as o">
				{{options_name_temp}}
				<div class="form-group">
					<label for="exampleInputName2">Name/Value</label>
					<input type="text" class="form-control" ng-model="choice_list_name"  placeholder="add new option name">
				</div>
				<div>
					<table  class="table">
						<tr>
							<th>name/value</th>
							<th>label</th>
							<th>action</th>
						</tr>
						<tr ng-repeat="opt in options">
							<td><span>{{opt.name}}</span></td>
							<td><span>{{opt.label}}</span></td>
							<td><a class="btn btn-danger btn-sx" ng-click="romoveOption(opt)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a></td>
						</tr>
					</table>
				</div>
				<form class="form-inline" ng-submit="addNewOption()">
					<div class="form-group">
						<label for="exampleInputName2">Name/Value</label>
						<input type="text" class="form-control" ng-model="name"  placeholder="add new option">
					</div>
					<div class="form-group">
						<label for="exampleInputEmail2">Label</label>
						<input type="text" class="form-control" ng-model="label"  placeholder="add new option">
					</div>
					<input class="btn-default" type="submit" value="add">
				</form>
			</div>
		</template>

		<template id="option_select_multiple">
			<div id="q_option_select" ng-controller="OptionSelectMultipleController as o">
				<div>
					<table  class="table">
						<tr>
							<th>name/value</th>
							<th>label</th>
							<th>action</th>
						</tr>
						<tr ng-repeat="opt in options">
							<td><span>{{opt.name}}</span></td>
							<td><span>{{opt.label}}</span></td>
							<td><a class="btn btn-danger btn-sx" ng-click="romoveOption(opt)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a></td>
						</tr>
					</table>
				</div>
				<form class="form-inline" ng-submit="addNewOption()">
					<div class="form-group">
						<label for="exampleInputName2">Name/Value</label>
						<input type="text" class="form-control" ng-model="name"  placeholder="add new option">
					</div>
					<div class="form-group">
						<label for="exampleInputEmail2">Label</label>
						<input type="text" class="form-control" ng-model="label"  placeholder="add new option">
					</div>
					<input class="btn-default" type="submit" value="add">
					<div class="row">
						<div class="col-md-6">
							<label class="">min</label>
							<input type="number" size="2"  ng-model="min"/>
						</div>
						<div class="col-md-6">
							<label>max</label>
							<input type="number" size="2"  ng-model="max"/>
						</div>
					</div>
				</form>
			</div>
		</template>

		<script type="text/ng-template" id="my-coba.html">
			<div class="panel panel-default">
			<div class="panel-heading container-fluid">

			<div class="col-md-10">
			<h3 class="panel-title" ng-bind="data.name"></h3>
			</div>
			<div class="col-md-2">
			<div>
			<a class="" href="#{{data.name}}popover"  tabindex="0" role="button" data-toggle="popover"  title="" ><span class="glyphicon glyphicon-option-vertical"></span></a>
			<div id="{{data.name}}popover"  class="hide">
			<button class="btn btn-primary btn-xs  btn-block" ng-click="deleteQuestionItem(data.name)">delete</button>
			<button class="btn btn-primary btn-xs  btn-block" ng-click="editQuestionItem(data.name)">edit</button>
			</div>
			</div>
			<div>
			<a data-toggle="collapse" href="#{{data.name}}collapse" class="collapse-btn"> <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></a>
			</div>
			</div>

			</div>
			<div class="panel-body collapse" id="{{data.name}}collapse">
			<div class="well">
			<span class="question-label" ng-bind="data.label">question label </span>
			<div class="question-answer">
			question answer
			</div>

			</div>
			</div>
			</div>
		</script>
		<script type="text/ng-template">

		</script>
</html>
